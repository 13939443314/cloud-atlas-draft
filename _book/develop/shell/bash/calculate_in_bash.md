Bash把所有变量都视为字符串，所以数值计算通常需要借助外部工具程序。

# `[]`运算符整数计算

bash支持`[]`运算符进行整数计算

```
a=2 
b=3 
c=$[a+b] 
d=$[a-b] 
e=$[a*b] 
f=$[a/b] 
g=$[a%b]  
```

`$`表示取变量值，中括号和里面的表达式可以视为一个变量。在中括号中引用变量可以直接使用变量名，也可以使用`$`加变量名，如：

```
c=$[$a +$b]
```

可以直接使用字面值：
 
```
c=$[2+3] 
d=$[2-3] 
e=$[2*3] 
f=$[2/3]
```

> 注意：
>
> 该运算`只支持整数`，如果a或者b是小数，则会报错。运算结果是小数的也会自动取整。
> 该运算`[ ]`的操作符（`+-*/`）和变量之间可以有空格。即可写作`c=$[a + b]`

# 运算符`(())`

其用法和`[ ]`类似，注意事项也差不多。

# expr及其反引用

* 普通计算

`expr`是一个外部命令（非Bash本身的命令），所以它是独立与Bash的，同样可以在其他Shell中使用。

```
a=2 
b=3 
expr $a + $b 
expr $a - $b 
expr $a \* $b 
expr $a / $b 
expr $a % $b
```

> 注意：
> 
> * 操作符和操作数之间一定要有空格间隔
> * 操作数（即变量）前必须有$符
> * 乘号*，要用反斜杠\进行转义
> * 该命令会将计算结果打印到标准输出
> * 仅支持整数运算
> * 也可以直接使用数字的字面值

* 赋值

expr的计算结果赋值给一个变量呢 -- 反引用:

```
c=`expr $a + $b`
```

# 用`bc`进行浮点数运算

bc是一个交互式的计算器。你可以在shell中键入bc来进入bc的命令提示符。但同样bc也支持写入到脚本中来进行数值计算。这需要用到管道，所谓管道就是将前一个命令的标准输出，作为标准输入传递给后面的命令。

```
echo '45.36-22.33'|bc
```

可以使用单引号也可以使用双引号。实现的过程就是将一个数学表达式传递给`bc`这个计算器。然后`bc`会将结果打印到标准输出。

* 设置精度

浮点运算，有一个很重要的概念就是精度。bc这里的精度指的的是小数的位数。在使用bc来进行除法运算的时候，你会发现默认是取整的，即没有小数部分。

```
echo 'scale=3;2/3'|bc
```

`.666`为输出的结果。因为设置了精度`scale=3`。前导0会被忽略。

# 参考

* [bash shell数值计算方法详解](http://linux.it.net.cn/e/shell/2015/0206/12898.html)