有时候需要禁止一个用户登录Linux操作系统，通常的做法是在用户的加密的密码前面加上`!`就可以禁用这个用户账号。

系统也提供了一个`usermod`命令来完成这个工作：

* `-L` 参数就是通过在用户加密密码前面加`!`来实现的
* `-e 1`(账号过期时间`1970-1-2`)或者`-e 1970-1-1`（账号过期时间`1970-01-01`）

> 注意：Unix起始时间是`1970-01-01`，所以设置`-e 1`就相当于设置成`1970-01-02`

# 禁用账号

语法：

```
usermod -L -e 1 {user}
usermod -L -e 1970-01-01 {user}
```

例如：

用户`jack`锁定账号之前`/etc/shadow`设置是

```
jack:加密密码:17026:0:99999:7:::
```

```
usermod -L -e 1 jack
```

然后检查 `/etc/passwd` 可以看到

```
jack:!加密密码:17026:0:99999:7::1:
```

即`usermod -L -e 1`将用户账号密码修改（添加`!`）并将账号过期时间设置成`1970-01-02`。如果要设置成`1970-01-01`则使用参数`-e 0`。

# 恢复账号

语法：

* `-U` 参数取消账号锁定

# `usermod`对ssh密钥登录的账号不生效

# 参考

* [HowTO: Linux Disable a User Account Command](https://www.cyberciti.biz/faq/linux-disable-user-account-command/)